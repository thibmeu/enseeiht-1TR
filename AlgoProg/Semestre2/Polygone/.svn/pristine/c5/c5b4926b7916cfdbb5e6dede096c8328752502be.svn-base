import static org.junit.Assert.*;

import java.awt.Color;

import org.junit.Before;
import org.junit.Test;

/**
 * Tests permettant de verifier les exigences et contraintes exprimees dans le
 * sujet.
 *
 * @author	Thibault Meunier
 * @version	2
 */
public class CreerRectangleTest {
	// precision pour les comparaisons entre nombres reels
	public final static double EPSILON = 0.001;
	
	private Point a, b, c, d;
	private Point verifA, verifB, verifC, verifD;
	private Polygone rectangle1, rectangle2, rectangle3, rectangle4, rectangle5;
	Polygone abcd;
	
	@Before public void setUp(){
		a = new Point(0, 0);
		b = new Point(2, 0);
		c = new Point(2, 1);
		d = new Point(0, 1);
		
		verifA = new Point(0, 0);
		verifB = new Point(2, 0);
		verifC = new Point(2, 1);
		verifD = new Point(0, 1);
		
		abcd = new Polygone(verifA, verifB, verifC, verifD);
		
		rectangle1 = Polygone.creerRectangle(a, c);
		rectangle3 = Polygone.creerRectangle(c, a);
		rectangle4 = Polygone.creerRectangle(d, b);
		rectangle5 = Polygone.creerRectangle(b, d);
	}
	
	static void memesCoordonnees(Point p1, Point p2) {
		assertEquals(p1.getX(), p2.getX(), EPSILON);
		assertEquals(p1.getY(), p2.getY(), EPSILON);
	}
	
	@Test public void testCreerRectangleEnCours() {
		//assertEquals(rectangle1.getSommet(1).getCouleur(), Color.blue);
		
	}
	
	@Test public void testerCouleur(){
		assertEquals(rectangle1.getSommet(0).getCouleur(), Color.green);
		rectangle1.getSommet(0).setCouleur(Color.pink);
		assertEquals(rectangle1.getSommet(0).getCouleur(), Color.green);
		b.setCouleur(Color.magenta);
		assertEquals(rectangle1.getSommet(0).getCouleur(), Color.green);
	}
	
	@Test public void testerOrdre(){
		assertEquals("Il manque des points au rectangle", rectangle1.getOrdre(), abcd.getOrdre());
		assertEquals("Il manque des points au rectangle", rectangle1.getOrdre(), 4);
	}
	
	@Test public void testerVraisSommets() {
		memesCoordonnees(rectangle1.getSommet(0), verifA);
		memesCoordonnees(rectangle1.getSommet(1), verifB);
		memesCoordonnees(rectangle1.getSommet(2), verifC);
		memesCoordonnees(rectangle1.getSommet(3), verifD);
		
        memesCoordonnees(rectangle3.getSommet(0), verifA);
		memesCoordonnees(rectangle3.getSommet(1), verifB);
		memesCoordonnees(rectangle3.getSommet(2), verifC);
        memesCoordonnees(rectangle3.getSommet(3), verifD);

		memesCoordonnees(rectangle4.getSommet(0), verifA);
		memesCoordonnees(rectangle4.getSommet(1), verifB);
		memesCoordonnees(rectangle4.getSommet(2), verifC);
		memesCoordonnees(rectangle4.getSommet(3), verifD);
		
        memesCoordonnees(rectangle5.getSommet(0), verifA);
		memesCoordonnees(rectangle5.getSommet(1), verifB);
		memesCoordonnees(rectangle5.getSommet(2), verifC);
		memesCoordonnees(rectangle5.getSommet(3), verifD);
	}
	
	@Test public void testerEncapsulation1() {
		memesCoordonnees(verifA, a);
		memesCoordonnees(verifB, b);
		memesCoordonnees(verifC, c);
		memesCoordonnees(verifD, d);
	}
	
	@Test public void testerEncapsulation2() {
		a.translater(1, 1);
		memesCoordonnees(verifA, rectangle1.getSommet(0));
		b.translater(1, 1);
		memesCoordonnees(verifB, rectangle1.getSommet(1));
		c.translater(1, 1);
		memesCoordonnees(verifC, rectangle1.getSommet(2));
		d.translater(1, 1);
		memesCoordonnees(verifD, rectangle1.getSommet(3));
	}
	
	@Test public void testerPointOpposes() {
		assertEquals("Les coordonnees ne sont pas valides", rectangle1.toString(), abcd.toString());
		
		//Un rectangle autre ordre
		assertEquals("Les coordonnees ne sont pas valides", rectangle3.toString(), abcd.toString());
		
		//Un rectangle autre ordre
		assertEquals("Les coordonnees ne sont pas valides", rectangle4.toString(), abcd.toString());
		
		//Un rectangle autre ordre
		assertEquals("Les coordonnees ne sont pas valides", rectangle4.toString(), abcd.toString());
	}
	
	@Test public void testerDirecticite() {
		assertTrue("Probleme de sens", rectangle1.getSommet(0).getX() < rectangle1.getSommet(1).getX());
		assertTrue("Probleme de sens", rectangle1.getSommet(1).getY() < rectangle1.getSommet(2).getY());
		assertTrue("Probleme de sens", rectangle1.getSommet(2).getX() > rectangle1.getSommet(3).getX());
		assertTrue("Probleme de sens", rectangle1.getSommet(3).getY() > rectangle1.getSommet(0).getY());
	}
	
	@Test(expected=AssertionError.class)
	public void testerSommetNuls1() {
		Polygone.creerRectangle(null, b);
	}
	
	@Test(expected=AssertionError.class)
	public void testerSommetNuls2() {
		Polygone.creerRectangle(d, null);
	}
	
	@Test(expected=AssertionError.class)
	public void testerRectangleLigne() {
		Polygone.creerRectangle(a, b);
	}
	
	@Test(expected=AssertionError.class)
	public void testerRectangleColonne() {
		Polygone.creerRectangle(d, a);
	}
	
	@Test(expected=AssertionError.class)
	public void testerPoint() {
		Polygone.creerRectangle(a, a);
	}
	
	public static void main(String[] args) {
		org.junit.runner.JUnitCore.main(CreerRectangleTest.class.getName());
	}
	
}
